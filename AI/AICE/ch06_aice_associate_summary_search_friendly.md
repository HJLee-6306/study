# Chapter 06. 데이터 전처리하기 — 요약 정리(검색 친화형)

본 문서는 「시나공 AI능력시험 AICE Associate 편」의 Chapter 06 전체를 **교재 순서**에 맞춰 정리한 자료입니다.  
검색 편의를 위해 **목차 앵커**, **키워드 인덱스**, **요약 표**, **체크리스트**를 포함합니다.

---

## 목차(바로가기)

1. [수치형 데이터 정제하기](#1-수치형-데이터-정제하기)  
   1.1 [결측치 파악하기](#11-결측치-파악하기) · 1.2 [결측치 처리하기](#12-결측치-처리하기) · 1.3 [이상치 파악하기](#13-이상치-파악하기) · 1.4 [이상치 처리하기](#14-이상치-처리하기) · 1.5 [구간화하기](#15-구간화하기)  
2. [범주형 데이터 정제하기](#2-범주형-데이터-정제하기)  
   2.1 [레이블 인코딩하기](#21-레이블-인코딩하기) · 2.2 [원핫 인코딩하기](#22-원핫-인코딩하기)  
3. [스케일링하기](#3-스케일링하기)  
   3.1 [정규화하기](#31-정규화하기) · 3.2 [표준화하기](#32-표준화하기)  
4. [변수 선택하기](#4-변수-선택하기)  
   4.1 [신규 변수 생성하기](#41-신규-변수-생성하기) · 4.2 [변수 선택하기](#42-변수-선택하기)

---

## 빠른 키워드 인덱스

결측치, 대치, 보간, MCAR/MAR/MNAR, 이상치, IQR, Z-Score, 윈저라이징, 로그변환, 구간화(cut,qcut),  
명목형, 순서형, 레이블 인코딩, 원핫 인코딩, 고카디널리티, 해싱, 빈도 인코딩,  
정규화, 표준화, 스케일 민감 알고리즘, 데이터 누수, ColumnTransformer, Pipeline,  
특징 공학, 파생변수, UFS, RFE, RFECV, L1, 트리 중요도, VIF, 교차검증.

---

## 1. 수치형 데이터 정제하기

### 1.1 결측치 파악하기
- 정의: 값이 비어 있거나 무효인 상태(예: NaN, 공백, 특수코드).
- 파악 절차
  - 컬럼별 결측 개수·비율 산출 후 패턴 가정(MCAR/MAR/MNAR).
  - 시계열·패널 데이터는 연속 구간의 결측 유무 확인.
- 핵심 팁
  - 결측 비율이 높을수록 삭제보다 대치를 우선 검토.
  - 대치 전후 분포 변화와 성능 영향 점검.

### 1.2 결측치 처리하기
- 삭제: 무작위 소수이며 분석 영향이 미미할 때만 사용.
- 대치
  - 수치형: 평균/중앙값(권장), 그룹별 대표값, KNN/모델 기반, 시계열 보간.
  - 범주형: 최빈값, Unknown 라벨.
- 데이터 누수 방지: 전처리기는 훈련 데이터로만 fit, 검증/테스트에는 transform.

### 1.3 이상치 파악하기
- 의미: 전형적 분포에서 벗어난 극단값(오입력·희귀사건 포함).
- 탐지 기법
  - IQR: Q1, Q3, IQR=Q3−Q1, 경계=Q1−1.5×IQR, Q3+1.5×IQR.
  - Z-Score: |z|>3 등 임계.
  - 시각화: 박스플롯, 히스토그램, QQ-Plot.
- 도메인 검토: 물리적 불가능 값은 즉시 정정 또는 제거.

### 1.4 이상치 처리하기
- 제거: 오류·오측정으로 확실할 때.
- 완화: 윈저라이징(극단값 캡).
- 변환: 로그/제곱근(양수·왜도 완화).
- 분리: 이상탐지 문제로 재정의(희귀 이벤트 예측).

### 1.5 구간화하기
- 목적: 연속형 → 범주형 변환으로 해석성·강건성 향상.
- 방법: 등간격(cut), 등빈도(qcut), 도메인 경계(업무 기준).
- 주의: 과도한 구간화는 정보 손실·성능 저하.

---

## 2. 범주형 데이터 정제하기

### 2.1 레이블 인코딩하기
- 원리: 범주 → 정수.
- 적합: 순서형(Ordinal) 변수(예: 소/중/대).
- 주의: 명목형에 적용 시 가짜 순서 효과 유발.

### 2.2 원핫 인코딩하기
- 원리: 각 범주를 이진 컬럼으로 분해.
- 장점: 순서 왜곡 없음.
- 과제: 고카디널리티는 차원 폭증 → 빈도/타깃 인코딩, 해싱 트릭 검토.
- 실무 팁: 검증/테스트에서 보지 못한 레벨은 handle_unknown='ignore'.

요약 표:

| 항목 | 레이블 인코딩 | 원핫 인코딩 |
|---|---|---|
| 데이터 유형 | 순서형 | 명목형 |
| 장점 | 단순, 저차원 | 순서 왜곡 없음 |
| 단점/리스크 | 가짜 순서 | 차원 증가, 희소 |
| 주의 | 명목형에 부적합 | 메모리·연산 고려 |

---

## 3. 스케일링하기

### 3.1 정규화하기
- 정의: (x−xmin)/(xmax−xmin) → [0,1].
- 특성: 이상치에 민감(최솟값·최댓값 영향).
- 용도: 픽셀 스케일, 신경망 입력 등.

### 3.2 표준화하기
- 정의: (x−μ)/σ → 평균 0, 분산 1.
- 권장 대상: 거리 기반(KNN, SVM), 선형계열(로지스틱/선형), PCA.
- 비민감: 트리/랜덤포레스트/GBM.
- 원칙: 훈련셋에 fit, 검증/테스트에 transform.

---

## 4. 변수 선택하기

### 4.1 신규 변수 생성하기
- 수치형 파생: 합, 비율, 차이, 이동통계(롤링 평균·표준편차).
- 범주형 파생: 지역→권역, 등급 그룹화.
- 날짜/시간: 연, 월, 요일, 주말 플래그, 랙/리드.
- 텍스트: 길이, 어휘 다양도, TF–IDF 등.
- 주의: 파생 후 중복·고상관 특성은 제거 후보.

### 4.2 변수 선택하기
- 목적: 과적합 억제, 학습 시간 단축, 해석성 향상.
- 방법 분류
  - 필터(통계): VarianceThreshold, 상관·카이제곱, UFS(SelectKBest).
  - 랩퍼(모델 기반): RFE(재귀적 제거), RFECV(교차검증으로 최적 특성 수 탐색).
  - 임베디드: L1(라쏘), 트리 중요도.
- 실무 팁
  - 선택기는 반드시 Pipeline 내부에 포함하여 데이터 누수 방지.
  - 선택 전후 교차검증 점수로 효과 검증.
  - 다중공선성(VIF) 점검, 도메인 타당성 검토.

---

## 섹션별 검색 예시(복사·붙여넣기)

- "결측치 중앙값 대치 장점", "시계열 보간 방법 비교", "MCAR MAR MNAR 차이"
- "이상치 IQR 1.5 기준 공식", "Z-Score 임계", "윈저라이징 정의"
- "cut qcut 차이", "도메인 경계 구간화 사례"
- "순서형 레이블 인코딩", "명목형 원핫 인코딩", "고카디널리티 해싱 빈도 인코딩"
- "정규화 vs 표준화 차이", "스케일 민감 알고리즘 목록"
- "UFS RFE RFECV 차이", "데이터 누수 방지 Pipeline", "특징 선택 전후 성능 비교"

---

## 체크리스트(시험·실무 공통)

- 결측치: 수치=중앙값, 범주=최빈값 기본. 시계열은 보간 검토.
- 이상치: IQR·Z-Score 기준 명시, 필요 시 윈저라이징/변환.
- 인코딩: 순서형=레이블, 명목형=원핫. 고카디널리티=빈도/해싱.
- 스케일링: KNN/SVM/선형/PCA에 표준화 권장. 트리는 대체로 불필요.
- 특징 공학: 날짜·비율·상호작용·텍스트 파생 후 중복·고상관 제거.
- 특징 선택: UFS(초벌) → RFE/RFECV(정교화), 교차검증으로 검증.
- 누수 방지: 전처리·선택기는 Pipeline 내부에서 fit/transform 분리.
- 리포팅: 선택 근거(계수·중요도·점수), CV 성능, 재현성(난수 고정, 파이프라인 저장).

---

## 용어 간단 정의

| 용어 | 설명 |
|---|---|
| MCAR/MAR/MNAR | 결측 발생 메커니즘 분류(무작위/조건부/비무작위). |
| IQR | 사분위 범위(Q3−Q1). 이상치 탐지 기준에 사용. |
| 윈저라이징 | 극단값을 경계값으로 캡핑하여 영향 완화. |
| 고카디널리티 | 범주 수가 매우 많은 상태. |
| UFS | 단변량 통계 점수로 상위 k개 특성 선택. |
| RFE/RFECV | 모델 기반 재귀 제거/교차검증 결합으로 최적 특성 수 탐색. |
| 데이터 누수 | 훈련 외 데이터 정보가 전처리·학습에 유입되는 현상. |

---

작성자 주: 본 요약은 교재의 장·절 구성을 따르되, 실무 적용과 시험 대비 관점에서 설명을 보강한 것입니다.
